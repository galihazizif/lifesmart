(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{7367:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order/create/[produkId]",function(){return n(3643)}])},6813:function(e,a,n){"use strict";n.d(a,{Z:function(){return i}});var s=n(5893),t=n(1664),r=n.n(t);n(4298);var l=n(1242);function i(){let{isLoggedIn:e,handleLogin:a,handleLogout:n}=(0,l.Z)();return(0,s.jsx)("nav",{id:"w2",className:"navbar navbar-default fixed-top",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)(r(),{className:"navbar-brand",href:"/dashboard",children:(0,s.jsxs)("span",{className:"xbrand",children:[(0,s.jsx)("img",{src:"/img/lifesmart.png",style:{height:"100%"}}),(0,s.jsx)("img",{src:"/img/elipsis-loader.gif",style:{display:"none"}}),(0,s.jsx)("span",{})]})}),(0,s.jsx)("button",{type:"button",className:"navbar-toggler collapsed","data-bs-toggle":"collapse","data-bs-target":"#w2-collapse","aria-controls":"w2-collapse","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,s.jsx)("span",{className:"navbar-toggler-icon"})}),(0,s.jsx)("div",{id:"w2-collapse",className:"navbar-collapse collapse",style:{},children:(0,s.jsxs)("ul",{id:"w3",className:"navbar-nav navbar-right nav",children:[(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("a",{className:"nav-link",href:"/",children:"Home"})}),(0,s.jsx)("li",{children:e?(0,s.jsx)(r(),{className:"nav-link",href:"/dashboard",children:"Dashboard"}):null}),(0,s.jsx)("li",{children:e?(0,s.jsx)(r(),{className:"nav-link",href:"/order/list",children:"Order List"}):null}),e?(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:n,className:"nav-link",children:"Logout"})}):null,e?null:(0,s.jsx)("li",{children:(0,s.jsx)(r(),{className:"nav-link",href:"/login",children:"Login"})})]})})]})})}},1242:function(e,a,n){"use strict";n.d(a,{Z:function(){return r}});var s=n(7294),t=n(1163);function r(){let e=(0,t.useRouter)(),[a,n]=(0,s.useState)(!1),[r,l]=(0,s.useState)("");return(0,s.useEffect)(()=>{if(window){let a=window.sessionStorage.getItem("pulsabebJwt");null!=a&&""!=a?n(!0):e.push("/login"),l(window.sessionStorage.getItem("pulsabebJwt"))}},[a]),{isLoggedIn:a,handleLogin:e=>{n(!0),window.sessionStorage.setItem("pulsabebJwt",e),l(e)},handleLogout:()=>{n(!1),window.sessionStorage.removeItem("pulsabebJwt"),e.push("/login")},pulsabebJwt:r}}},3643:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return c}});var s=n(5893),t=n(6813),r=n(5121),l=n(7294),i=n(1163);n(1242),n(9332);var d=n(4709);function o(e){let{produk:a,placeOrder:n,orderStatus:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Konfirmasi Order"}),(0,s.jsxs)("div",{className:"order-form",children:[(0,s.jsx)("table",{id:"w0",className:"table table-striped table-bordered detail-view",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Nomor Tujuan"}),(0,s.jsx)("td",{children:a.tujuan})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Operator"}),(0,s.jsx)("td",{children:a.keterangan})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Produk"}),(0,s.jsx)("td",{children:a.kode})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Keterangan"}),(0,s.jsx)("td",{children:a.keterangan})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Harga*"}),(0,s.jsx)("td",{children:a.harga})]})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("small",{children:[(0,s.jsx)("strong",{children:"Harga"})," adalah harga jual produk dari OjekBeb, anda diperbolehkan untuk menjual kembali dengan harga yang berbeda"]})}),(0,s.jsx)("small",{})]}),(0,s.jsx)("div",{className:"alert alert-danger",children:(0,s.jsx)("small",{children:"Jangan sampai salah nomor tujuan, mohon diperiksa kembali, kami tidak bertanggung jawab terhadap kesalahan pengetikan nomor tujuan."})}),(0,s.jsxs)("div",{style:!0!=t.placed?{visibility:"visible"}:{visibility:"hidden"},children:[(0,s.jsx)("button",{className:"btn btn-success","data-method":"post","data-confirm":"saya yakin semua data sudah benar?",onClick:n,"data-pjax-state":"",disabled:!0==t.placed&&""==t.statustext,children:"Proses Order"}),(0,s.jsx)("a",{className:"btn btn-default","data-confirm":"saya akan membatalkan orderan?","data-method":"post",href:"#","data-pjax-state":"",children:"Batal"})]}),(0,s.jsx)("div",{children:!0==t.placed&&""==t.statustext?(0,s.jsx)("img",{src:"/img/elipsis-loader.gif"}):""})]})}function c(){let e=(0,i.useRouter)(),[a,n]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),[p,x]=(0,l.useState)({tujuan:"",kode:"",harga:"",keterangan:"",keteragan_tambahan:""}),[j,b]=(0,l.useState)({placed:!1,success:!1,statustext:""});async function g(a){b({placed:!0,success:!1,statustext:""});let n={noTujuan:p.tujuan,kodeProduk:p.kode};r.Z.post("https://app.lifesmart.my.id/pulsabebapi/order/create",n,{headers:{Authorization:"Bearer "+window.sessionStorage.getItem("pulsabebJwt")}}).then(function(e){b({placed:!0,success:!0,statustext:"Sukses"})}).catch(function(a){console.log(a),401==a.response.status&&confirm(a.response.data.name)&&e.push("/login"),b({placed:!0,success:!1,statustext:a.response.data.message})})}async function f(e){if(console.log(p),e.preventDefault(),"PLN"!=p.keterangan){let e=(0,d.h)(p.tujuan,"ID");e.isValid()?n(!0):m({tujuan:!1})}else p.tujuan>8&&n(!0);return!1}(0,l.useEffect)(()=>{var e=window.sessionStorage.getItem("selectedProductId");if(null!=e){let a=JSON.parse(e);x({tujuan:"",kode:a.kode,harga:a.harga_jual,keterangan:a.keterangan,keterangan_tambahan:a.keterangan_tambahan})}},[]);let{id:k}=e.query;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"loader-wrapper",children:(0,s.jsx)("div",{className:"loader"})}),(0,s.jsxs)("div",{className:"wrap",children:[(0,s.jsx)(t.Z,{}),(0,s.jsxs)("div",{id:"main-content",className:"container",children:[!0!==a&&!1==j.placed?(0,s.jsx)(h,{submitTujuan:f,atFormChange:function(e){let a=e.target.value;console.log(a),x({...p,[e.target.name]:a})},order:p,formItemValidator:c}):"",!0==a&&""==j.statustext?(0,s.jsx)(o,{produk:p,placeOrder:g,orderStatus:j}):"",!0==j.placed&&""!=j.statustext?(0,s.jsx)(u,{message:j.statustext}):""]})]})]})}function u(e){let{message:a}=e,n=(0,i.useRouter)();return(0,l.useEffect)(function(){setTimeout(function(){n.push("/order/list")},2e3)},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"order-create",children:[(0,s.jsx)("h3",{children:"Order"}),(0,s.jsx)("div",{className:"message",children:a}),(0,s.jsx)("p",{children:"Anda akan dialihkan ke daftar order dalam 1 detik"})]})})}function h(e){let{submitTujuan:a,atFormChange:n,order:t,formItemValidator:r}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"order-create",children:[(0,s.jsx)("h3",{children:"Paket Data dan Pulsa"}),(0,s.jsx)("style",{type:"text/css",dangerouslySetInnerHTML:{__html:'\n[type="radio"]:checked,\n[type="radio"]:not(:checked) {\n    position: absolute;\n    left: -9999px;\n}\n[type="radio"]:checked + label,\n[type="radio"]:not(:checked) + label\n{\n    position: relative;\n    padding-left: 28px;\n    cursor: pointer;\n    line-height: 20px;\n    display: inline-block;\n    color: #666;\n}\n[type="radio"]:checked + label:before,\n[type="radio"]:not(:checked) + label:before {\n    content: \'\';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 18px;\n    height: 18px;\n    border: 1px solid #ddd;\n    border-radius: 100%;\n    background: #fff;\n}\n[type="radio"]:checked + label:after,\n[type="radio"]:not(:checked) + label:after {\n    content: \'\';\n    width: 12px;\n    height: 12px;\n    background: #F87DA9;\n    position: absolute;\n    top: 4px;\n    left: 4px;\n    border-radius: 100%;\n    -webkit-transition: all 0.2s ease;\n    transition: all 0.2s ease;\n}\n[type="radio"]:not(:checked) + label:after {\n    opacity: 0;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n}\n[type="radio"]:checked + label:after {\n    opacity: 1;\n    -webkit-transform: scale(1);\n    transform: scale(1);\n}\n'}}),(0,s.jsx)("div",{className:"order-form",children:(0,s.jsxs)("form",{id:"w0",onSubmit:a,children:[(0,s.jsx)("div",{className:"row",children:(0,s.jsxs)("div",{className:"col-xs-12",children:[(0,s.jsxs)("div",{className:"form-group field-no_tujuan required has-success",children:[(0,s.jsx)("label",{className:"control-label",htmlFor:"no_tujuan",children:"No Tujuan"}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("input",{type:"text",id:"no_tujuan",className:!1==r.tujuan?"form-control is-invalid":"form-control",onChange:n,name:"tujuan",maxLength:14,value:t.tujuan,placeholder:"Nomor tujuan","aria-required":"true","aria-invalid":"false"}),(0,s.jsx)("div",{className:"input-group-btn"})]}),(0,s.jsx)("div",{className:"help-block"})]})," "]})}),(0,s.jsxs)("div",{className:"form-group field-produk_id required",children:[(0,s.jsx)("label",{className:"control-label",htmlFor:"produk_id",children:"Produk"}),(0,s.jsx)("input",{type:"text",className:"form-control",readOnly:!0,value:t.kode+" "+t.keterangan_tambahan}),(0,s.jsx)("div",{className:"help-block"})]}),(0,s.jsxs)("div",{className:"form-group field-harga",children:[(0,s.jsx)("label",{className:"control-label",htmlFor:"harga",children:"Harga"}),(0,s.jsx)("input",{type:"text",id:"harga",className:"form-control",name:"harga",readOnly:!0,defaultValue:t.harga,disabled:""}),(0,s.jsx)("div",{className:"help-block"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("button",{type:"submit",className:"btn btn-warning btn-block",children:"Next \xbb"})," "]})]})})]})})}n(1664)}},function(e){e.O(0,[6,121,255,774,888,179],function(){return e(e.s=7367)}),_N_E=e.O()}]);