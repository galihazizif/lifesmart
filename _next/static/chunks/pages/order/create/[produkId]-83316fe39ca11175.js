(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{2082:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/order/create/[produkId]",function(){return s(4536)}])},9327:(e,a,s)=>{"use strict";s.d(a,{A:()=>i});var n=s(4848),t=s(1106),r=s.n(t);s(8133);var l=s(4107);function i(){let{isLoggedIn:e,handleLogin:a,handleLogout:s}=(0,l.A)();return(0,n.jsx)("nav",{id:"w2",className:"navbar navbar-default fixed-top",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)(r(),{className:"navbar-brand",href:"/dashboard",children:(0,n.jsxs)("span",{className:"xbrand",children:[(0,n.jsx)("img",{src:"/img/lifesmart.png",style:{height:"100%"}}),(0,n.jsx)("img",{src:"/img/elipsis-loader.gif",style:{display:"none"}}),(0,n.jsx)("span",{})]})}),(0,n.jsx)("button",{type:"button",className:"navbar-toggler collapsed","data-bs-toggle":"collapse","data-bs-target":"#w2-collapse","aria-controls":"w2-collapse","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,n.jsx)("span",{className:"navbar-toggler-icon"})}),(0,n.jsx)("div",{id:"w2-collapse",className:"navbar-collapse collapse",style:{},children:(0,n.jsxs)("ul",{id:"w3",className:"navbar-nav navbar-right nav",children:[(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsx)("a",{className:"nav-link",href:"/",children:"Home"})}),(0,n.jsx)("li",{children:e?(0,n.jsx)(r(),{className:"nav-link",href:"/dashboard",children:"Dashboard"}):null}),(0,n.jsx)("li",{children:e?(0,n.jsx)(r(),{className:"nav-link",href:"/order/list",children:"Order List"}):null}),e?(0,n.jsx)("li",{children:(0,n.jsx)("a",{onClick:s,className:"nav-link",children:"Logout"})}):null,e?null:(0,n.jsx)("li",{children:(0,n.jsx)(r(),{className:"nav-link",href:"/login",children:"Login"})})]})})]})})}},4107:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});var n=s(6540),t=s(6715);function r(){let e=(0,t.useRouter)(),[a,s]=(0,n.useState)(!1),[r,l]=(0,n.useState)("");return(0,n.useEffect)(()=>{if(window){let a=window.sessionStorage.getItem("pulsabebJwt");null!=a&&""!=a?s(!0):e.push("/login"),l(window.sessionStorage.getItem("pulsabebJwt"))}},[a]),{isLoggedIn:a,handleLogin:e=>{s(!0),window.sessionStorage.setItem("pulsabebJwt",e),l(e)},handleLogout:()=>{s(!1),window.sessionStorage.removeItem("pulsabebJwt"),e.push("/login")},pulsabebJwt:r}}},4536:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var n=s(4848),t=s(9327),r=s(4335),l=s(6540),i=s(6715);s(4107),s(6424);var d=s(1133);function o(e){let{produk:a,placeOrder:s,orderStatus:t,order:r,setOrder:l,atFormChange:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Konfirmasi Order"}),(0,n.jsxs)("div",{className:"order-form",children:[(0,n.jsx)("table",{id:"w0",className:"table table-striped table-bordered detail-view",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Nomor Tujuan"}),(0,n.jsx)("td",{children:a.tujuan})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Operator"}),(0,n.jsx)("td",{children:a.keterangan})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Produk"}),(0,n.jsx)("td",{children:a.kode})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Keterangan"}),(0,n.jsx)("td",{children:a.keterangan})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Harga*"}),(0,n.jsx)("td",{children:a.harga})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Harga Jual"}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{onChange:i,name:"harga_jual_mitra",value:r.harga_jual_mitra,type:"number",className:"form-control",placeholder:"Harga: harus lebih besar atau sama dari harga asli"})})]})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("small",{children:[(0,n.jsx)("strong",{children:"Harga"})," adalah harga jual produk dari OjekBeb, anda diperbolehkan untuk menjual kembali dengan harga yang berbeda"]})}),(0,n.jsx)("small",{})]}),(0,n.jsx)("div",{className:"alert alert-danger",children:(0,n.jsx)("small",{children:"Jangan sampai salah nomor tujuan, mohon diperiksa kembali, kami tidak bertanggung jawab terhadap kesalahan pengetikan nomor tujuan."})}),(0,n.jsxs)("div",{style:!0!=t.placed?{visibility:"visible"}:{visibility:"hidden"},children:[(0,n.jsx)("button",{className:"btn btn-success","data-method":"post","data-confirm":"saya yakin semua data sudah benar?",onClick:s,"data-pjax-state":"",disabled:!0==t.placed&&""==t.statustext,children:"Proses Order"}),(0,n.jsx)("a",{className:"btn btn-default","data-confirm":"saya akan membatalkan orderan?","data-method":"post",href:"#","data-pjax-state":"",children:"Batal"})]}),(0,n.jsx)("div",{children:!0==t.placed&&""==t.statustext?(0,n.jsx)("img",{src:"/img/elipsis-loader.gif"}):""})]})}function c(){let e=(0,i.useRouter)(),[a,s]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),[j,p]=(0,l.useState)({tujuan:"",kode:"",harga:"",keterangan:"",keteragan_tambahan:"",harga_jual_mitra:""}),[x,g]=(0,l.useState)({placed:!1,success:!1,statustext:""});(0,l.useEffect)(()=>{var e=window.sessionStorage.getItem("selectedProductId");if(null!=e){let a=JSON.parse(e);p({tujuan:"",kode:a.kode,harga:a.harga_jual,keterangan:a.keterangan,keterangan_tambahan:a.keterangan_tambahan})}},[]);let b=function(e){let a=e.target.value;console.log(a),p({...j,[e.target.name]:a})};async function f(a){g({placed:!0,success:!1,statustext:""});let s={noTujuan:j.tujuan,kodeProduk:j.kode,harga_jual_mitra:j.harga_jual_mitra};r.A.post("http://pulsabeb.local/pulsabebapi/order/create",s,{headers:{Authorization:"Bearer "+window.sessionStorage.getItem("pulsabebJwt")}}).then(function(e){g({placed:!0,success:!0,statustext:"Sukses"})}).catch(function(a){console.log(a),401==a.response.status&&confirm(a.response.data.name)&&e.push("/login"),g({placed:!0,success:!1,statustext:a.response.data.message})})}async function k(e){if(console.log(j),e.preventDefault(),"PLN"!=j.keterangan)try{(0,d.L)(j.tujuan,"ID").isValid()?s(!0):m({tujuan:!1})}catch(e){alert("Invalid destination number"),m({tujuan:!1})}else j.tujuan>8&&s(!0);return!1}let{id:v}=e.query;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"loader-wrapper",children:(0,n.jsx)("div",{className:"loader"})}),(0,n.jsxs)("div",{className:"wrap",children:[(0,n.jsx)(t.A,{}),(0,n.jsxs)("div",{id:"main-content",className:"container",children:[!0!==a&&!1==x.placed?(0,n.jsx)(h,{submitTujuan:k,atFormChange:b,order:j,formItemValidator:c}):"",!0==a&&""==x.statustext?(0,n.jsx)(o,{produk:j,placeOrder:f,orderStatus:x,order:j,setOrder:p,atFormChange:b}):"",!0==x.placed&&""!=x.statustext?(0,n.jsx)(u,{message:x.statustext}):""]})]})]})}function u(e){let{message:a}=e,s=(0,i.useRouter)();return(0,l.useEffect)(function(){setTimeout(function(){s.push("/order/list")},2e3)},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"order-create",children:[(0,n.jsx)("h3",{children:"Order"}),(0,n.jsx)("div",{className:"message",children:a}),(0,n.jsx)("p",{children:"Anda akan dialihkan ke daftar order dalam 1 detik"})]})})}function h(e){let{submitTujuan:a,atFormChange:s,order:t,formItemValidator:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"order-create",children:[(0,n.jsx)("h3",{children:"Paket Data dan Pulsa"}),(0,n.jsx)("style",{type:"text/css",dangerouslySetInnerHTML:{__html:'\n[type="radio"]:checked,\n[type="radio"]:not(:checked) {\n    position: absolute;\n    left: -9999px;\n}\n[type="radio"]:checked + label,\n[type="radio"]:not(:checked) + label\n{\n    position: relative;\n    padding-left: 28px;\n    cursor: pointer;\n    line-height: 20px;\n    display: inline-block;\n    color: #666;\n}\n[type="radio"]:checked + label:before,\n[type="radio"]:not(:checked) + label:before {\n    content: \'\';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 18px;\n    height: 18px;\n    border: 1px solid #ddd;\n    border-radius: 100%;\n    background: #fff;\n}\n[type="radio"]:checked + label:after,\n[type="radio"]:not(:checked) + label:after {\n    content: \'\';\n    width: 12px;\n    height: 12px;\n    background: #F87DA9;\n    position: absolute;\n    top: 4px;\n    left: 4px;\n    border-radius: 100%;\n    -webkit-transition: all 0.2s ease;\n    transition: all 0.2s ease;\n}\n[type="radio"]:not(:checked) + label:after {\n    opacity: 0;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n}\n[type="radio"]:checked + label:after {\n    opacity: 1;\n    -webkit-transform: scale(1);\n    transform: scale(1);\n}\n'}}),(0,n.jsx)("div",{className:"order-form",children:(0,n.jsxs)("form",{id:"w0",onSubmit:a,children:[(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:"col-xs-12",children:[(0,n.jsxs)("div",{className:"form-group field-no_tujuan required has-success",children:[(0,n.jsx)("label",{className:"control-label",htmlFor:"no_tujuan",children:"No Tujuan"}),(0,n.jsxs)("div",{className:"input-group",children:[(0,n.jsx)("input",{type:"number",id:"no_tujuan",className:!1==r.tujuan?"form-control is-invalid":"form-control",onChange:s,name:"tujuan",maxLength:14,value:t.tujuan,placeholder:"Nomor tujuan","aria-required":"true","aria-invalid":"false"}),(0,n.jsx)("div",{className:"input-group-btn"})]}),(0,n.jsx)("div",{className:"help-block"})]})," "]})}),(0,n.jsxs)("div",{className:"form-group field-produk_id required",children:[(0,n.jsx)("label",{className:"control-label",htmlFor:"produk_id",children:"Produk"}),(0,n.jsx)("input",{type:"text",className:"form-control",readOnly:!0,value:t.kode+" "+t.keterangan_tambahan}),(0,n.jsx)("div",{className:"help-block"})]}),(0,n.jsxs)("div",{className:"form-group field-harga",children:[(0,n.jsx)("label",{className:"control-label",htmlFor:"harga",children:"Harga"}),(0,n.jsx)("input",{type:"text",id:"harga",className:"form-control",name:"harga",readOnly:!0,defaultValue:t.harga,disabled:""}),(0,n.jsx)("div",{className:"help-block"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("button",{type:"submit",className:"btn btn-warning btn-block",children:"Next \xbb"})," "]})]})})]})})}s(1106)}},e=>{var a=a=>e(e.s=a);e.O(0,[48,335,616,636,593,792],()=>a(2082)),_N_E=e.O()}]);